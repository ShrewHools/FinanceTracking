<section class="home">
  <% if current_user %>
    <%= link_to 'Create Income', new_income_path, class: 'btn btn-lg btn-success' %>
    <%= link_to 'Create Expense', new_expense_path, class: 'btn btn-lg btn-danger' %>

    <%= form_tag({ controller: 'report', action: 'search' }, method: 'get', remote: true, class:'filters_box') do %>
      <div class="category">
        <div class="title">Category</div>
        <div class="select_category">
          <select id="category_search" name="category_id" class="selectpicker">
            <option class="disabled_options" selected value> -- Select category -- </option>
            <% if @income_categories.present? %>
              <optgroup label="Income">
                <% @income_categories.each do |category| %>
                  <option value="<%= category.id %>"><%= category.name %></option>
                <% end %>
              </optgroup>
            <% end %>
            <% if @expense_categories.present? %>
              <optgroup label="Expense">
                <% @expense_categories.each do |category| %>
                  <option value="<%= category.id %>"><%= category.name %></option>
                <% end %>
              </optgroup>
            </select>
          <% end %>
        </div>
      </div>
      <div class="period">
        <div class="title">Period</div>
        <div class="inputs">
          <div class="input_wrapper">
            From <%= date_field_tag :min_range, nil, class: 'form-control', placeholder: 'dd.mm.yyyy' %>
          </div>
          <div class="input_wrapper">
             To <%= date_field_tag :max_range, nil, class: 'form-control', placeholder: 'dd.mm.yyyy' %>
          </div>
        </div>
      </div>
      <div class="btn_wrap">
        <%= submit_tag('Search', class: 'btn btn btn-primary') %>
      </div>
    <% end %>

    <div class="reports">
      <%= render partial: 'reports', locals: { incomes: @incomes, expenses: @expenses } %>
    </div>
  <% else %>
    <div class="center hero-unit">
      <h1>Welcome to the application "Personal finance tracking"</h1>
      <h2>The application will be available after registration / login</h2>
      <%= link_to 'Sign in', new_user_session_path, class: 'btn btn-large btn-primary' %>
      <%= link_to 'Sign up', new_user_registration_path, class: 'btn btn-large btn-success' %>
    </div>
  <% end %>
</section>
